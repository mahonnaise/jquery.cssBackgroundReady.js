<!DOCTYPE html>
<html>
	<head>
		<title>cssBackgroundReady</title>
		<meta charset="UTF-8"/>
		<style>
		.bar {
			background: transparent url(lsys.png) 0 0 no-repeat;
			width: 1079px;
			height: 859px;
		}
		</style>
		<script></script>
	</head>
	<body>
		<div class="foo">
			<div class="bar" data-background-color="#f00">this one will be red (without showing a big red rectangle for a split second)</div>
			<div class="bar" data-background-color="#0f0">this one will be green (without showing a big green rectangle for a split second)</div>
		</div>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
		<script src="../jquery.cssBackgroundReady.js"></script>
		<script>
		$('.bar').cssBackgroundReady(function () {
			this.each(function () {
				var el = $(this), col;
				col = el.data('background-color');
				if (col) {
					el.css('background-color', col);
				}
			});
		});
		</script>
	</body>
</html>