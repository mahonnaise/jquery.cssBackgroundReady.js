<!DOCTYPE html>
<html>
	<head>
		<title>cssBackgroundReady</title>
		<meta charset="UTF-8"/>
		<style>
		.foo {
			width: 2158px
		}
		.bar {
			float: left;
			background: transparent url(lsys.png) 0 0 no-repeat;
			width: 1079px;
			height: 859px;
		}
		</style>
	</head>
	<body>
		<h1>reload with ctrl+f5 to override the cache</h1>
		<div class="foo">
			<div class="bar js-cbr" data-background-color="#f00">this one will be red (does NOT show a big red rectangle for a split second)</div>
			<div class="bar" style="background-color:#f00">this one will be red (shows a big red rectangle for a split second)</div>
			<div class="bar js-cbr" data-background-color="#0f0">this one will be green (does NOT show a big green rectangle for a split second)</div>
			<div class="bar" style="background-color:#0f0">this one will be green (shows a big green rectangle for a split second)</div>
		</div>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
		<script src="../jquery.cssBackgroundReady.js"></script>
		<script>
		$('.js-cbr').cssBackgroundReady(function () {
			this.each(function () {
				var el = $(this), col;
				col = el.data('background-color');
				if (col) {
					el.css('background-color', col);
				}
			});
		});
		</script>
	</body>
</html>